package main

import (
	//"github.com/tadeuszjt/geom/32"
	"bufio"
	"github.com/go-gl/glfw/v3.2/glfw"
	"github.com/tadeuszjt/gfx"
    "os"
)

var (
	text = MakeTextWindow()
)

func charCallback(w *glfw.Window, r rune) {
}

func setup(w *gfx.Win) error {
	f, err := os.Open("text")
	if err != nil {
		return err
	}

	scanner := bufio.NewScanner(f)
	for scanner.Scan() {
		text.AddLine(scanner.Text())
	}

	w.GetGlfwWindow().SetCharCallback(charCallback)
	return nil
}

func draw(w *gfx.WinDraw) {
	text.Draw(w)
}

func main() {
	gfx.RunWindow(gfx.WinConfig{
		SetupFunc: setup,
		DrawFunc:  draw,
		Title:     "Text",
		Resizable: true,
	})
}
